import{a as A,c as Y}from"./chunk-MMRLWTMM.js";import{a as _e,b as fe}from"./chunk-VL5ON5BH.js";import{F as H,e as pe}from"./chunk-R56PJEDK.js";import{l as K}from"./chunk-Y5BXK7NB.js";import{b as ge}from"./chunk-YMO3DXVO.js";import{a as P}from"./chunk-3TQ4UNVT.js";import{g as re,h as ue}from"./chunk-FPQQBUCR.js";import{Ca as S,Da as w,Ea as L,Fa as se,Ga as l,Ha as le,Ia as b,Ja as B,Ka as V,La as U,Ma as me,Na as de,Pa as M,Qa as G,Sa as T,Wa as D,Za as F,bb as ce,ja as ae,ma as N,na as I,oa as R,pa as ie,qa as O,ra as j,sa as W,ta as oe,ua as E,za as k}from"./chunk-PVO7PMX5.js";import{l as ne,t as y}from"./chunk-ZJDWWCZS.js";import{$b as _,Bb as r,Cb as i,Db as c,Kb as s,Pb as ee,Va as d,Wa as p,Xb as u,Yb as te,Z as X,Zb as J,ac as f,bc as g,ca as $,dc as v,ha as C,qb as Z,sb as h}from"./chunk-HGSCEON2.js";import"./chunk-ODN5LVDJ.js";var ye=(()=>{class m{constructor(n,a,e){this.dialogRef=n,this.data=a,this.toastr=e,this.username="",this.password=""}onCancel(){this.dialogRef.close()}onSubmit(){this.username&&this.password?this.dialogRef.close({username:this.username,password:this.password}):this.username==null||this.username==""?this.toastr.error("Enter your username","Error"):(this.password==null||this.password=="")&&this.toastr.error("Enter your password","Error")}static{this.\u0275fac=function(a){return new(a||m)(p(N),p(I),p(A))}}static{this.\u0275cmp=C({type:m,selectors:[["app-login-dialog"]],standalone:!0,features:[v],decls:17,vars:2,consts:[["mat-dialog-title","",1,"dialog-title","mb-2"],[1,"login-form","mt-2",3,"ngSubmit"],["appearance","outline",1,"input-field"],["matInput","","name","username","required","",3,"ngModelChange","ngModel"],["matInput","","name","password","type","password","required","",3,"ngModelChange","ngModel"],["align","end",1,"dialog-actions"],["mat-button","",1,"cancel-button",3,"click"],["mat-button","","color","primary",1,"submit-button",3,"click"]],template:function(a,e){a&1&&(r(0,"h2",0),u(1,"Login"),i(),r(2,"mat-dialog-content")(3,"form",1),s("ngSubmit",function(){return e.onSubmit()}),r(4,"mat-form-field",2)(5,"mat-label"),u(6,"Username"),i(),r(7,"input",3),g("ngModelChange",function(t){return f(e.username,t)||(e.username=t),t}),i()(),r(8,"mat-form-field",2)(9,"mat-label"),u(10,"Password"),i(),r(11,"input",4),g("ngModelChange",function(t){return f(e.password,t)||(e.password=t),t}),i()()()(),r(12,"mat-dialog-actions",5)(13,"button",6),s("click",function(){return e.onCancel()}),u(14," Cancel "),i(),r(15,"button",7),s("click",function(){return e.onSubmit()}),u(16," Submit "),i()()),a&2&&(d(7),_("ngModel",e.username),d(4),_("ngModel",e.password))},dependencies:[oe,O,W,j,E,D,y,M,b,k,S,w,de,le,se,T,F],styles:[".dialog-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#3f51b5;padding-bottom:16px}.input-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.dialog-actions[_ngcontent-%COMP%]{padding-top:16px}.cancel-button[_ngcontent-%COMP%]{color:#f44336}.submit-button[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.submit-button[_ngcontent-%COMP%]:hover{background-color:#303f9f}button[_ngcontent-%COMP%]{min-width:100px}"]})}}return m})();var Me="AIzaSyCsQc4fLXZfZcSU00oHFdGWOZG4qiq7af8",Ge=`https://translation.googleapis.com/language/translate/v2?key=${Me}`,Ee=10,ke=10;var z=(()=>{class m{constructor(n){this.api=n}fetchCustomersList(n){return this.api.post("get-malmatta-nodni-list-info",n)}addCustomer(n){return this.api.post("add-new-customer-in-malmatta-nodni",n)}getAnukramankBywardNo(n){return this.api.post("get-annu-kramank-in-malmatta-nodni",n)}verifyUserLogin(n){return this.api.post("verify-user-for-permission",n)}getMalmattaNodniById(n){return this.api.get(`get-malmatta-nodni-user-by-id/${n}`)}updateCustomerList(n){return this.api.put("update-malmatta-nodni",n)}getDropdownYearsList(){return this.api.get("get-all-year-list")}addSillakJoda(n){return this.api.post("insert-update-sillak-joda",n)}deleteCustomerFromNodani(n){return this.api.delete(`delete-malmatta-nodni-info/${n}`)}getPrakarById(n){return this.api.get(`prakar/${n}`)}static{this.\u0275fac=function(a){return new(a||m)($(P))}}static{this.\u0275prov=X({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();function Pe(m,q){if(m&1&&(r(0,"mat-option",31),u(1),i()),m&2){let n=q.$implicit;h("value",n.YEAR_ID),d(),J(" ",n.YEAR_NAME," ")}}function Ae(m,q){if(m&1&&(r(0,"mat-option",31),u(1),i()),m&2){let n=q.$implicit;h("value",n.YEAR_ID),d(),J(" ",n.YEAR_NAME," ")}}var be=(()=>{class m{constructor(n,a,e,o,t,x){this.dialogRef=n,this.data=a,this.dialog=e,this.apiService=o,this.customerService=t,this.toastr=x,this.previousTaxForm=new L({year:new l(null),to:new l(null),accountHolderName:new l(void 0),landHolderName:new l(void 0),propertyTax:new l(void 0),electricityTax:new l(void 0),healthTax:new l(void 0),cleaningTax:new l(void 0),generalWaterTax:new l(void 0),specialWaterTax:new l(void 0),otherFees:new l(void 0),noticeFees:new l(void 0),discount5:new l(void 0),increase5:new l(void 0),total:new l(void 0),newuserr_id:new l(void 0),userr_id:new l(void 0),RNO:new l(void 0),annu_kramank:new l(void 0),vard_numbers:new l(void 0)}),this.gruhBhumukar=0,this.vijDivabattiKar=0,this.arogyaRakshanKar=0,this.safaiKar=0,this.samanyaPaniKar=0,this.vishesPaniKar=0,this.itarFee=0,this.noticeFee=0,this.fivPercentSut=0,this.fivPercentWad=0,this.totalAmount=0,this.userDetails=[],this.yearOptions=[],console.log("Received data in SillakjodaComponent:",this.data)}ngOnInit(){this.loadYearOptions(),this.previousTaxForm.get("year")?.valueChanges.subscribe(n=>{n!=null&&this.setNextYear(Number(n))}),this.userDetails=this.apiService.getDecodedToken(),this.data&&this.previousTaxForm.patchValue({year:this.data.year,accountHolderName:this.data.HOMEUSER_NAME,landHolderName:this.data.BHOGATWARGARACHE_NAME,userr_id:this.userDetails.userId,newuserr_id:this.data.NEWUSER_ID,RNO:this.data.RNO,annu_kramank:this.data.ANNU_KRAMANK,vard_numbers:this.data.VARD_NUMBER})}openModal(){this.dialog.open(m,{width:"500px",data:{year:2024,to:"Option 1",accountHolderName:"User Name",landHolderName:"",propertyTax:0,electricityTax:0,healthTax:0,cleaningTax:0,generalWaterTax:0,specialWaterTax:0,otherFees:0,noticeFees:0,discount5:0,increase5:0,total:0}}).afterClosed().subscribe(a=>{a&&console.log("Modal Data:",a)})}onCancel(){this.dialogRef.close()}onSave(){this.previousTaxForm.valid&&this.dialogRef.close(this.previousTaxForm.value)}gruh_bhumukar(n){console.log("gruh_bhumukar",n.target.value)}updateTotal(){this.totalAmount=(this.gruhBhumukar||0)+(this.vijDivabattiKar||0)+(this.arogyaRakshanKar||0)+(this.safaiKar||0)+(this.samanyaPaniKar||0)+(this.vishesPaniKar||0)+(this.itarFee||0)+(this.noticeFee||0)+(this.fivPercentWad||0)-(this.fivPercentSut||0)}selectInputValue(n){n.target.select()}loadYearOptions(){this.customerService.getDropdownYearsList().subscribe({next:n=>{console.log("res",n),this.yearOptions=n?.data,console.log("yearOptions",this.yearOptions)},error:n=>{console.error("Error getting drop down:",n),this.toastr.error("There was an error getting the year dropdown.","Error")}})}setNextYear(n){let a=this.yearOptions.findIndex(e=>Number(e.YEAR_ID)===Number(n));if(a!==-1&&a+1<this.yearOptions.length){let e=this.yearOptions[a+1];this.previousTaxForm.get("to")?.setValue(e.YEAR_ID)}else this.previousTaxForm.get("to")?.setValue(null)}save_magil_kar(){if(this.previousTaxForm.invalid)this.toastr.warning("Please fill all required fields.","warning");else{let n={user_id:this.userDetails.userId,newuser_id:this.previousTaxForm.value.newuserr_id,cmbyear:this.previousTaxForm.value.year,cmbyear1:this.previousTaxForm.value.to,homeuser:this.previousTaxForm.value.accountHolderName,kar_bhumikar:this.previousTaxForm.value.propertyTax,divabatti_kar:this.previousTaxForm.value.electricityTax,aarogya_rakshan_kar:this.previousTaxForm.value.healthTax,safai_kar:this.previousTaxForm.value.cleaningTax,samanya_pani_kar:this.previousTaxForm.value.generalWaterTax,vishesh_pani_kar:this.previousTaxForm.value.specialWaterTax,total:this.totalAmount,rno:this.previousTaxForm.value.RNO,annu_kramank:this.previousTaxForm.value.annu_kramank,etar_fees:this.previousTaxForm.value.otherFees,notice_fees:this.previousTaxForm.value.noticeFees,less5:this.previousTaxForm.value.discount5,plus5:this.previousTaxForm.value.increase5,ward_numbers:this.previousTaxForm.value.vard_numbers,years:this.previousTaxForm.value.year};this.customerService.addSillakJoda(n).subscribe({next:a=>{console.log("res",a),a.status==201?(console.log("inside",a),this.toastr.success(a.message,"Success")):this.toastr.warning(a.message,"Warning")},error:a=>{console.error("Error adding sillak joda:",a),this.toastr.error("There was an error adding the sillak joda.","Error")}})}}static{this.\u0275fac=function(a){return new(a||m)(p(N),p(I),p(R),p(P),p(z),p(A))}}static{this.\u0275cmp=C({type:m,selectors:[["app-sillakjoda"]],standalone:!0,features:[v],decls:80,vars:15,consts:[[3,"formGroup"],["mat-dialog-title","",1,"text-center","text-bold","bg-color"],[1,"mat-typography"],[1,"form-row","mt-4"],["type","hidden","id","newuserr_id","formControlName","newuserr_id"],["type","hidden","id","userr_id","formControlName","userr_id"],["type","hidden","id","RNO","formControlName","RNO"],["type","hidden","id","annu_kramank","formControlName","annu_kramank"],["type","hidden","id","vard_numbers","formControlName","vard_numbers"],["appearance","outline",1,"form-field"],[1,"text-bold"],["name","from_year","formControlName","year"],[3,"value",4,"ngFor","ngForOf"],["name","to_year","formControlName","to","disable",""],["matInput","","type","text","formControlName","accountHolderName"],["matInput","","type","text","formControlName","landHolderName"],[1,"form-row"],["matInput","","type","number","formControlName","propertyTax",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","electricityTax",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","healthTax",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","cleaningTax",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","generalWaterTax",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","specialWaterTax",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","otherFees",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","noticeFees",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","discount5",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","increase5",3,"input","ngModelChange","focus","ngModel"],["matInput","","type","number","formControlName","total",3,"value"],["align","center"],["mat-button","","mat-dialog-close","",1,"custom-red"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click","mat-dialog-close"],[3,"value"]],template:function(a,e){a&1&&(r(0,"form",0)(1,"h2",1),u(2,"\u0936\u093F\u0932\u094D\u0932\u0915 \u091C\u094B\u0921\u093E"),i(),r(3,"mat-dialog-content",2)(4,"div",3),c(5,"input",4)(6,"input",5)(7,"input",6)(8,"input",7)(9,"input",8),r(10,"mat-form-field",9)(11,"mat-label",10),u(12,"\u0935\u0930\u094D\u0937 (Year)"),i(),r(13,"mat-select",11),Z(14,Pe,2,2,"mat-option",12),i()(),r(15,"mat-form-field",9)(16,"mat-label",10),u(17,"\u0924\u0947 (To)"),i(),r(18,"mat-select",13),Z(19,Ae,2,2,"mat-option",12),i()(),r(20,"mat-form-field",9)(21,"mat-label",10),u(22,"\u0916\u093E\u0924\u0947\u0927\u093E\u0930\u0915\u093E\u091A\u0947 \u0928\u093E\u0935"),i(),c(23,"input",14),i(),r(24,"mat-form-field",9)(25,"mat-label",10),u(26,"\u092D\u094B\u0917\u0935\u091F\u0926\u093E\u0930\u093E\u091A\u0947 \u0928\u093E\u0935"),i(),c(27,"input",15),i()(),r(28,"div",16)(29,"mat-form-field",9)(30,"mat-label",10),u(31,"\u0917\u0943\u0939\u0915\u0930 \u0935 \u092D\u0942\u092E\u0940\u0915\u0930"),i(),r(32,"input",17),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.gruhBhumukar,t)||(e.gruhBhumukar=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(33,"mat-form-field",9)(34,"mat-label",10),u(35,"\u0935\u093F\u091C /\u0926\u093F\u0935\u093E\u092C\u0924\u094D\u0924\u0940 \u0915\u0930"),i(),r(36,"input",18),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.vijDivabattiKar,t)||(e.vijDivabattiKar=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(37,"mat-form-field",9)(38,"mat-label",10),u(39,"\u0906\u0930\u094B\u0917\u094D\u092F \u0930\u0915\u094D\u0937\u0923 \u0915\u0930"),i(),r(40,"input",19),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.arogyaRakshanKar,t)||(e.arogyaRakshanKar=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(41,"mat-form-field",9)(42,"mat-label",10),u(43,"\u0938\u092B\u093E\u0908 \u0915\u0930"),i(),r(44,"input",20),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.safaiKar,t)||(e.safaiKar=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()()(),r(45,"div",16)(46,"mat-form-field",9)(47,"mat-label",10),u(48,"\u0938\u093E\u092E\u093E\u0928\u094D\u092F \u092A\u093E\u0928\u0940 \u0915\u093C\u0930"),i(),r(49,"input",21),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.samanyaPaniKar,t)||(e.samanyaPaniKar=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(50,"mat-form-field",9)(51,"mat-label",10),u(52,"\u0935\u093F\u0936\u0947\u0937 \u092A\u093E\u0923\u0940 \u0915\u0930"),i(),r(53,"input",22),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.vishesPaniKar,t)||(e.vishesPaniKar=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(54,"mat-form-field",9)(55,"mat-label",10),u(56,"\u0907\u0924\u0930 \u092B\u0940"),i(),r(57,"input",23),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.itarFee,t)||(e.itarFee=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(58,"mat-form-field",9)(59,"mat-label",10),u(60,"\u0928\u094B\u091F\u0940\u0938 \u092B\u0940"),i(),r(61,"input",24),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.noticeFee,t)||(e.noticeFee=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()()(),r(62,"div",16)(63,"mat-form-field",9)(64,"mat-label",10),u(65,"\u096B% \u0938\u0942\u091F (-)"),i(),r(66,"input",25),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.fivPercentSut,t)||(e.fivPercentSut=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(67,"mat-form-field",9)(68,"mat-label",10),u(69,"\u096B% \u0935\u093E\u0922 (+)"),i(),r(70,"input",26),s("input",function(){return e.updateTotal()}),g("ngModelChange",function(t){return f(e.fivPercentWad,t)||(e.fivPercentWad=t),t}),s("focus",function(t){return e.selectInputValue(t)}),i()(),r(71,"mat-form-field",9)(72,"mat-label",10),u(73,"\u090F\u0915\u0942\u0923"),i(),c(74,"input",27),i()()(),r(75,"mat-dialog-actions",28)(76,"button",29),u(77,"Cancel"),i(),r(78,"button",30),s("click",function(){return e.save_magil_kar()}),u(79,"Save"),i()()()),a&2&&(h("formGroup",e.previousTaxForm),d(14),h("ngForOf",e.yearOptions),d(5),h("ngForOf",e.yearOptions),d(13),_("ngModel",e.gruhBhumukar),d(4),_("ngModel",e.vijDivabattiKar),d(4),_("ngModel",e.arogyaRakshanKar),d(4),_("ngModel",e.safaiKar),d(5),_("ngModel",e.samanyaPaniKar),d(4),_("ngModel",e.vishesPaniKar),d(4),_("ngModel",e.itarFee),d(4),_("ngModel",e.noticeFee),d(5),_("ngModel",e.fivPercentSut),d(4),_("ngModel",e.fivPercentWad),d(4),ee("value",e.totalAmount),d(4),h("mat-dialog-close",!0))},dependencies:[H,E,D,T,F,ae,ce,ie,O,W,j,Y,M,b,k,B,S,w,G,V,U,y,ne],styles:[".text-bold[_ngcontent-%COMP%]{font-weight:700}.custom-red[_ngcontent-%COMP%]{background-color:#f14a4a!important;color:#fff!important}.bg-color[_ngcontent-%COMP%]{background-color:#214162;color:#fff}.form-panel[_ngcontent-%COMP%]{padding:20px;margin:10px;background-color:#fff}.title[_ngcontent-%COMP%]{font-size:20px;color:#fff;background-color:#214162;padding:10px;text-align:center}.form-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-top:20px}.form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.form-field[_ngcontent-%COMP%]{flex:1 1 calc(20% - 20px);min-width:150px}.submit-row[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.submit-btn[_ngcontent-%COMP%]{width:230px}@media (max-width: 768px){.form-field[_ngcontent-%COMP%]{flex:1 1 100%}}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}"]})}}return m})();var _t=(()=>{class m{constructor(n,a,e,o,t){this.util=n,this.apiService=a,this.toastr=e,this.customerService=o,this.dialog=t,this.userDetails=[],this.searchValue="",this.userType="new_user_edit_joda",this.isEdit=!1,this.dataSource=new K,this.itemsPerPage=ke,this.pagedDataSource=new K([]),this.currentPage=1,this.isReadonly=!0,this.primary_key_id=0,this.customerForm=new L({annu_kramank:new l(void 0),malmatta_no:new l(void 0),ward_no:new l(void 0),plot_no:new l(void 0),khasara_no:new l(void 0),survey_no:new l(void 0),khate_dharkache_name:new l(void 0),bhogvat_dharak_name:new l(void 0),address:new l(void 0),user_id:new l}),this.displayedColumns=[{key:"#",value:"#"},{key:"ANNU_KRAMANK",value:"\u0905\u0928\u0941.\u0915\u094D\u0930\u092E\u093E\u0902\u0915"},{key:"MALMATTA_NUMBER",value:"\u092E\u093F\u0933\u0915\u0924 \u0915\u094D\u0930\u0902."},{key:"VARD_NUMBER",value:"\u0935\u093E\u0930\u094D\u0921 \u0915\u094D\u0930\u0902."},{key:"KHASARA_KRAMANK",value:"\u0916\u0938\u0930\u093E \u0915\u094D\u0930\u0902."},{key:"HOMEUSER_NAME",value:"\u0916\u093E\u0924\u0947\u0927\u093E\u0930\u0915\u093E\u091A\u0947 \u0928\u093E\u0935"},{key:"BHOGATWARGARACHE_NAME",value:"\u092D\u094B\u0917\u0935\u091F\u0926\u093E\u0930\u093E\u091A\u0947 \u0928\u093E\u0935"},{key:"ADDRESS_NAGAR_SOCIETY",value:"\u092A\u0924\u094D\u0924\u093E"},{key:"action",value:"action"}]}ngOnInit(){this.userDetails=this.apiService.getDecodedToken(),this.customerForm.patchValue({user_id:this.userDetails.userId}),this.user_id=this.userDetails.userId,this.fetchData()}fetchData(){this.customerService.fetchCustomersList({page_number:this.currentPage,search:this.searchValue,user_id:this.userDetails.userId}).subscribe({next:n=>{this.dataSource=new K(n?.data??[]),this.totalItems=n?.total_count??0,this.setPageData({pageIndex:0,pageSize:Ee,length:this.dataSource.data.length})},error:n=>{console.error("Error fetch Parkar Data:",n)}})}onPageChange(n){this.currentPage=n.pageIndex,this.fetchData()}setPageData(n){let a=n.pageIndex*n.pageSize,e=a+n.pageSize;this.pagedDataSource.data=this.dataSource.data.slice(a,e)}keyDownText(n,a){this.util.onKeydown(n,a,this.customerForm)}submitCustomer(){if(this.customerForm.invalid)this.toastr.warning("Please fill all required fields.","warning");else{let n={annu_kramank:this.customerForm.value.annu_kramank,malmatta_no:this.customerForm.value.malmatta_no,ward_no:this.customerForm.value.ward_no,plot_no:this.customerForm.value.plot_no,khasara_no:this.customerForm.value.khasara_no,survey_no:this.customerForm.value.survey_no,khate_dharkache_name:this.customerForm.value.khate_dharkache_name,bhogvat_dharak_name:this.customerForm.value.bhogvat_dharak_name,address:this.customerForm.value.address,user_id:this.customerForm.value.user_id};this.customerService.addCustomer(n).subscribe({next:a=>{console.log("res",a),a.status==201?(console.log("inside",a),this.reset(),this.toastr.success(a.message,"Success"),this.fetchData()):this.toastr.warning(a.message,"Warning")},error:a=>{console.error("Error adding customer:",a),this.toastr.error("There was an error adding the customer.","Error")}})}}reset(){let n=this.customerForm.value.user_id;this.customerForm.reset(),this.customerForm.patchValue({user_id:n})}getAnuKramank(n){let a=n.target,o={ward_no:parseInt(a.value),user_id:this.user_id};this.customerService.getAnukramankBywardNo(o).subscribe({next:t=>{console.log("res",t),this.customerForm.patchValue({annu_kramank:t?.data?.ANNU_KRAMANK})},error:t=>{console.error("Error getting anu kramank:",t),this.toastr.error("There was an error getting the anu kramank.","Error")}})}verifyUser(n,a){let e=this.dialog.open(ye,{width:"400px"});console.log("status",n),e.afterClosed().subscribe(o=>{if(o){let t={username:o.username,password:o.password,user_type:this.userType,district_id:this.userDetails.DISTRICT_ID,taluka_id:this.userDetails.TALUKA_ID,panchayat_id:this.userDetails.PANCHAYAT_ID};this.customerService.verifyUserLogin(t).subscribe({next:x=>{x.status==200?(this.toastr.success("Access has been granted"),n=="edit"&&(this.editInfo(a.NEWUSER_ID),this.primary_key_id=a.NEWUSER_ID)):this.toastr.error("You entered wrong credentials","Error")},error:x=>{console.error("Error adding customer:",x),this.toastr.error("There was an error adding the customer.","Error")}})}else console.log("Login dialog was closed without submission")})}editInfo(n){this.customerService.getMalmattaNodniById(n).subscribe({next:a=>{console.log("response",a),this.customerForm.patchValue({annu_kramank:a?.data?.ANNU_KRAMANK,malmatta_no:a?.data?.MALMATTA_NUMBER,ward_no:a?.data?.VARD_NUMBER,plot_no:a?.data?.PLOT_NO,khasara_no:a?.data?.KHASARA_KRAMANK,survey_no:a?.data?.SURVEY_KRAMANK,khate_dharkache_name:a?.data?.HOMEUSER_NAME,bhogvat_dharak_name:a?.data?.BHOGATWARGARACHE_NAME,address:a?.data?.ADDRESS_NAGAR_SOCIETY,user_id:this.user_id}),this.isEdit=!0},error:a=>{console.error("Error getting prakar:",a),this.toastr.error("There was an error getting the prakar.","Error")}})}updateCustomer(){if(this.customerForm.invalid)this.toastr.warning("Please fill all required fields.","warning");else{let n={annu_kramank:this.customerForm.value.annu_kramank,malmatta_no:this.customerForm.value.malmatta_no,ward_no:this.customerForm.value.ward_no,plot_no:this.customerForm.value.plot_no,khasara_no:this.customerForm.value.khasara_no,survey_no:this.customerForm.value.survey_no,khate_dharkache_name:this.customerForm.value.khate_dharkache_name,bhogvat_dharak_name:this.customerForm.value.bhogvat_dharak_name,address:this.customerForm.value.address,user_id:this.customerForm.value.user_id,new_user_id:this.primary_key_id};this.customerService.updateCustomerList(n).subscribe({next:a=>{a.status!==400?(this.reset(),this.toastr.success(a.message,"Success"),this.searchValue="",this.fetchData()):this.toastr.warning(a.message,"Warning")},error:a=>{console.error("Error updating customer nodni form:",a),this.toastr.error("There was an error updating the customer nodni form.","Error")}})}}onEdit(n){this.verifyUser("edit",n),console.log("Edit:",n)}onDelete(n){let a=n.NEWUSER_ID;this.util.showConfirmAlert().then(e=>{if(a===0){this.toastr.error("This customer nodani cannot be deleted.","Error");return}e&&this.customerService.deleteCustomerFromNodani(a).subscribe({next:o=>{o.status==200?(this.toastr.success(o.message,"Success"),this.fetchData()):this.toastr.error(o.message,"Error")},error:o=>{console.error("Error deleting customer nodani:",o),this.toastr.error("There was an error deleting the customer nodani.","Error")}})})}onView(n){console.log("View:",n)}onPrint(n){console.log("Print:",n)}onDownload(n){console.log("Download PDF:",n)}onPreview(n){console.log("Preview:",n)}onPrevTax(n){console.log("Previous Tax:",n),this.openModal(n)}openModal(n){this.dialog.open(be,{width:"1000px",data:n}).afterClosed().subscribe(e=>{e&&console.log("Modal Data:",e)})}static{this.\u0275fac=function(a){return new(a||m)(p(ge),p(P),p(A),p(z),p(R))}}static{this.\u0275cmp=C({type:m,selectors:[["app-customer"]],inputs:{totalItems:"totalItems",itemsPerPage:"itemsPerPage"},standalone:!0,features:[v],decls:50,vars:16,consts:[[1,"form-panel"],[1,"title"],[1,"form-grid",3,"formGroup"],[1,"form-row"],["type","hidden","formControlName","user_id","name","user_id"],["appearance","outline",1,"form-field"],[1,"text-bold"],["matInput","","type","text","formControlName","annu_kramank","title","when enter ward numberr anukaramnk added dyanmically",3,"readonly"],["matInput","","type","text","formControlName","malmatta_no"],["matInput","","type","number","formControlName","ward_no","min","0",3,"input"],["matInput","","type","text","formControlName","plot_no"],["matInput","","type","text","formControlName","khasara_no"],["matInput","","type","text","formControlName","survey_no"],["matInput","","type","text","formControlName","khate_dharkache_name",3,"keypress"],["matInput","","type","text","formControlName","bhogvat_dharak_name",3,"keypress"],["matInput","","type","text","formControlName","address",3,"keypress"],[1,"submit-row"],["mat-raised-button","","color","primary",1,"submit-btn",3,"click"],[1,"table-responsive","mt-4"],[3,"editEvent","deleteEvent","viewEvent","printEvent","downloadEvent","previewEvent","prevTaxEvent","displayedColumns","dataSource","currentPage","isEdit","isDelete","isView","isPrint","isDownload","isPreview","isKar"],[3,"pageChange","length","pageSize","currentPage"]],template:function(a,e){a&1&&(r(0,"mat-card",0)(1,"mat-card-title",1),u(2,"\u092E\u093E\u0932\u092E\u0924\u094D\u0924\u093E \u0927\u093E\u0930\u0915\u093E\u091A\u0940 \u092F\u093E\u0926\u0940 (Customer List)"),i(),c(3,"mat-divider"),r(4,"form",2)(5,"div",3),c(6,"input",4),r(7,"mat-form-field",5)(8,"mat-label",6),u(9,"\u0905\u0928\u0941. \u0915\u094D\u0930\u092E\u093E\u0902\u0915"),i(),c(10,"input",7),i(),r(11,"mat-form-field",5)(12,"mat-label",6),u(13,"\u092E\u093E\u0932\u092E\u0924\u094D\u0924\u093E \u0915\u094D\u0930."),i(),c(14,"input",8),i(),r(15,"mat-form-field",5)(16,"mat-label",6),u(17,"\u0935\u0949\u0930\u094D\u0921 \u0915\u094D\u0930."),i(),r(18,"input",9),s("input",function(t){return e.getAnuKramank(t)}),i()(),r(19,"mat-form-field",5)(20,"mat-label",6),u(21,"\u092A\u094D\u0932\u0949\u091F \u0915\u094D\u0930."),i(),c(22,"input",10),i(),r(23,"mat-form-field",5)(24,"mat-label",6),u(25,"\u0916\u0938\u0930\u093E \u0915\u094D\u0930."),i(),c(26,"input",11),i(),r(27,"mat-form-field",5)(28,"mat-label",6),u(29,"\u0938\u0930\u094D\u0935\u0947 \u0915\u094D\u0930."),i(),c(30,"input",12),i(),r(31,"mat-form-field",5)(32,"mat-label",6),u(33,"\u0916\u093E\u0924\u0947\u0926\u093E\u0930\u093E\u091A\u0947 \u0928\u093E\u0935"),i(),r(34,"input",13),s("keypress",function(t){return e.keyDownText(t,"khate_dharkache_name")}),i()(),r(35,"mat-form-field",5)(36,"mat-label",6),u(37,"\u092D\u094B\u0917\u0935\u091F\u0926\u093E\u0930\u093E\u091A\u0947 \u0928\u093E\u0935"),i(),r(38,"input",14),s("keypress",function(t){return e.keyDownText(t,"bhogvat_dharak_name")}),i()(),r(39,"mat-form-field",5)(40,"mat-label",6),u(41,"\u092A\u0924\u094D\u0924\u093E"),i(),r(42,"input",15),s("keypress",function(t){return e.keyDownText(t,"address")}),i()()(),r(43,"div",16)(44,"button",17),s("click",function(){return e.isEdit?e.updateCustomer():e.submitCustomer()}),u(45),i()()(),r(46,"div",18)(47,"app-mat-data-table",19),s("editEvent",function(t){return e.onEdit(t)})("deleteEvent",function(t){return e.onDelete(t)})("viewEvent",function(t){return e.onView(t)})("printEvent",function(t){return e.onPrint(t)})("downloadEvent",function(t){return e.onDownload(t)})("previewEvent",function(t){return e.onPreview(t)})("prevTaxEvent",function(t){return e.onPrevTax(t)}),i(),r(48,"app-custom-pagination",20),s("pageChange",function(t){return e.onPageChange(t)}),i()(),c(49,"div"),i()),a&2&&(d(4),h("formGroup",e.customerForm),d(6),h("readonly",e.isReadonly),d(35),te(e.isEdit?"Update":"Submit"),d(2),h("displayedColumns",e.displayedColumns)("dataSource",e.pagedDataSource)("currentPage",e.currentPage)("isEdit",!0)("isDelete",!0)("isView",!1)("isPrint",!0)("isDownload",!1)("isPreview",!1)("isKar",!0),d(),h("length",e.totalItems)("pageSize",e.itemsPerPage)("currentPage",e.currentPage))},dependencies:[H,pe,E,re,ue,D,T,F,Y,M,b,k,B,S,w,me,G,V,U,y,fe,_e],styles:[".form-panel[_ngcontent-%COMP%]{padding:20px;margin:10px;background-color:#fff}.title[_ngcontent-%COMP%]{font-size:20px;color:#fff;background-color:#214162;padding:10px;text-align:center}.form-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-top:20px}.form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.form-field[_ngcontent-%COMP%]{flex:1 1 calc(20% - 20px);min-width:150px}.submit-row[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.submit-btn[_ngcontent-%COMP%]{width:230px}@media (max-width: 768px){.form-field[_ngcontent-%COMP%]{flex:1 1 100%}}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}"]})}}return m})();export{_t as CustomerComponent};
